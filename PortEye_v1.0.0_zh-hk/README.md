# PortEye - 端口監控系統

PortEye 是一個基於 Python Flask 框架開發的端口監控系統，它能夠即時監控系統中正在監聽的網絡端口，並記錄端口的開啟和關閉歷史。該系統採用前後端分離的模式，提供了一個簡單易用的 Web 界面，讓用戶可以輕鬆查看端口資訊和歷史記錄。

## 功能特性
- **即時端口監控**：即時顯示系統中正在監聽的網絡端口資訊，包括端口號、進程名稱、命令列、CPU 使用率和記憶體使用率。
- **端口歷史記錄**：記錄端口的開啟和關閉事件，用戶可以查看歷史記錄，從而了解端口的使用情況。
- **數據過濾**：支援按照端口號和進程名稱對當前端口資訊和歷史記錄進行過濾，方便用戶快速定位所需資訊。
- **權限檢查**：在運行程式時，會自動檢查是否具備管理員權限，以確保能夠存取系統的網絡連接資訊。
- **信號處理**：支援 `SIGINT` 和 `SIGTERM` 信號，當程式接收到這些信號時，會停止端口監控線程並退出程式。

## 安裝與運行

### 環境要求
- Python 3.x
- Flask
- Flask - CORS
- psutil
- sqlite3

### 安裝依賴
```bash
pip install flask flask-cors psutil
```

### 運行程式
```bash
python app.py
```

### 注意事項
- 在 Windows 系統上，程式會自動請求管理員權限；在 Linux 系統上，請使用 `sudo` 運行程式。
- 程式啟動後，會自動打開瀏覽器訪問 `http://localhost:5000`。

## 使用方法

### 當前端口資訊
- 在「端口過濾」輸入框中輸入端口號，可篩選出指定端口的資訊。
- 在「進程過濾」輸入框中輸入進程名稱，可篩選出指定進程所佔用的端口資訊。
- 點擊「過濾」按鈕，即可顯示過濾後的結果。

### 端口歷史記錄
- 在「顯示記錄數量」輸入框中輸入要顯示的記錄數量。
- 在「端口過濾」輸入框中輸入端口號，可篩選出指定端口的歷史記錄。
- 在「進程過濾」輸入框中輸入進程名稱，可篩選出指定進程的歷史記錄。
- 點擊「過濾」按鈕，即可顯示過濾後的結果。

## 項目結構
```
PortEye/
├── app.py              # 後端代碼，負責權限檢查、資料庫初始化、端口監控以及提供 API 接口
├── templates/
│   └── index.html      # 前端頁面，通過 JavaScript 與後端 API 進行交互，展示當前端口資訊和端口歷史記錄
└── port_monitor.db     # SQLite 資料庫，用於存儲端口的開啟和關閉歷史記錄
```

## API 接口

### 獲取當前端口資訊
- **URL**：`/api/ports`
- **方法**：`GET`
- **參數**：
  - `port`：可選，端口號，用於過濾指定端口的資訊。
  - `process`：可選，進程名稱，用於過濾指定進程所佔用的端口資訊。
- **返回值**：JSON 陣列，包含當前正在監聽的端口資訊。

### 獲取端口歷史記錄
- **URL**：`/api/history`
- **方法**：`GET`
- **參數**：
  - `limit`：可選，默認值為 100，用於指定要返回的記錄數量。
  - `port`：可選，端口號，用於過濾指定端口的歷史記錄。
  - `process`：可選，進程名稱，用於過濾指定進程的歷史記錄。
- **返回值**：JSON 陣列，包含端口的歷史記錄資訊。

## 貢獻
如果您對該項目感興趣，可以通過以下方式貢獻代碼：
1. Fork 該項目。
2. 創建您的特性分支 (`git checkout -b feature/your-feature`)。
3. 提交您的更改 (`git commit -m 'Add some feature'`)。
4. 將您的更改推送至遠程分支 (`git push origin feature/your-feature`)。
5. 打開一個 Pull Request。

## 許可證
該項目採用 MIT 許可證，詳情請參閱 [LICENSE](LICENSE) 文件。 